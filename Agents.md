アクセスしやすく、高速で、快適なUIを構築するための簡潔なルール 必須/推奨/禁止を使用して決定を導きます

## インタラクション

- キーボード
  - 必須: [WAI-ARIA APG](https://wwww3org/WAI/ARIA/apg/patterns/) に準拠した完全なキーボードサポート
  - 必須: 視覚的なフォーカスリング (`:focus-visible`; `:focus-within` とグループ化)
  - 必須: APG パターンに従ったフォーカス管理（トラップ、移動、戻り）
- ターゲットと入力
  - 必須: ヒットターゲットのサイズは ≥24px（モバイルでは ≥44px）。視覚的に <24px の場合、ヒットエリアを拡大
  - 必須: モバイル `<input>` のフォントサイズは ≥16px、または以下を設定 :
    ```html
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
    ```
  - 禁止: ブラウザのズームを無効化
  - 必須: ダブルタップズームを防ぐために `touch-action: manipulation` を設定し、デザインに合わせて `-webkit-tap-highlight-color` を設定
- 入力とフォーム（動作）
  - 必須: ハイドレーションセーフな入力（フォーカスや値が失われない）
  - 禁止: `<input>/<textarea>` でのペーストをブロック
  - 必須: ローディングボタンはスピナーを表示し、元のラベルを保持
  - 必須: フォーカスされたテキスト入力で Enter を押すと送信。`<textarea>` では ⌘/Ctrl+Enter で送信、Enter で改行
  - 必須: リクエストが開始されるまで送信を有効に保ち、その後無効化してスピナーを表示し、冪等性キーを使用
  - 必須: 入力をブロックしない。自由なテキストを受け入れ、後で検証
  - 必須: 不完全なフォームの送信を許可し、検証を表示
  - 必須: エラーはフィールドの横にインラインで表示し、送信時には最初のエラーにフォーカス
  - 必須: `autocomplete` と意味のある `name` を使用し、正しい `type` と `inputmode` を設定
  - 推奨: メールアドレス/コード/ユーザー名のスペルチェックを無効化
  - 推奨: プレースホルダーは省略記号で終わり、例のパターンを表示（例: `+1 (123) 456-7890`, `sk-012345…`）
  - 必須: ナビゲーション前に未保存の変更を警告
  - 必須: パスワードマネージャーと2FAに対応し、ワンタイムコードの貼り付けを許可
  - 必須: テキスト拡張や末尾のスペースを処理するために値をトリム
  - 必須: チェックボックス/ラジオボタンにデッドゾーンがないようにし、ラベルとコントロールが1つの広いヒットターゲットを共有
- 状態とナビゲーション
  - 必須: URL は状態を反映（フィルター/タブ/ページネーション/展開パネルのディープリンク）。[nuqs](https://nuqs.dev) のようなライブラリを推奨
  - 必須: 戻る/進むでスクロールを復元
  - 必須: リンクはリンクとして使用—ナビゲーションには `<a>/<Link>` を使用（Cmd/Ctrl/ミドルクリックをサポート）
- フィードバック
  - 推奨: 楽観的なUIを使用し、レスポンスで調整。失敗時にはエラーを表示し、ロールバックまたは元に戻すオプションを提供
  - 必須: 破壊的な操作を確認するか、元に戻すウィンドウを提供
  - 必須: トースト/インライン検証には丁寧な `aria-live` を使用
  - 推奨: フォローアップを開くオプションには省略記号（例: “名前を変更…”）を使用
- タッチ/ドラッグ/スクロール
  - 必須: 寛容なインタラクションを設計（広いターゲット、明確なアフォーダンス; 繊細さを避ける）
  - 必須: グループ内の最初のツールチップを遅延させ、後続のピアには遅延なし
  - 必須: モーダル/ドロワー内で意図的に `overscroll-behavior: contain` を設定
  - 必須: ドラッグ中はテキスト選択を無効化し、ドラッグされた要素/コンテナに `inert` を設定
  - 必須: “死んでいるように見える”インタラクティブゾーンを作らない—クリック可能に見える場合はクリック可能にする
- 自動フォーカス
  - 推奨: デスクトップでは主要な入力が1つの場合に自動フォーカスを設定。モバイルではレイアウトシフトを避けるためにほとんど使用しない

## アニメーション

- 必須: `prefers-reduced-motion` を尊重（簡易バリアントを提供）
- 推奨: CSS > Web Animations API > JS ライブラリを優先
- 必須: 合成フレンドリーなプロパティ（`transform`, `opacity`）をアニメートし、レイアウト/再描画プロパティ（`top/left/width/height`）を避ける
- 推奨: 原因と結果を明確にするため、または意図的な楽しさを追加するためにのみアニメート
- 推奨: 変更（サイズ/距離/トリガー）に一致するイージングを選択
- 必須: アニメーションは中断可能で入力駆動型（自動再生を避ける）
- 必須: 正しい `transform-origin` を設定（モーションは“物理的に”開始すべき場所から始まる）

## レイアウト

- 推奨: 視覚的な整列; 幾何学よりも知覚が勝る場合は±1px 調整
- 必須: グリッド/ベースライン/エッジ/視覚的中心への意図的な整列—偶然の配置を避ける
- 推奨: アイコン/テキストのロックアップをバランス（ストローク/ウェイト/サイズ/間隔/色）
- 必須: モバイル、ラップトップ、超ワイドを検証（超ワイドは50%ズームでシミュレート）
- 必須: セーフエリアを尊重（`env(safe-area-inset-*)` を使用）
- 必須: 不要なスクロールバーを避け、オーバーフローを修正

## コンテンツとアクセシビリティ

- 推奨: インラインヘルプを優先; ツールチップは最後の手段
- 必須: スケルトンは最終コンテンツを反映し、レイアウトシフトを回避
- 必須: `<title>` は現在のコンテキストに一致
- 必須: 行き止まりを作らない; 常に次のステップ/回復を提供
- 必須: 空/スパース/密集/エラー状態を設計
- 推奨: カーリクォート（“ ”）; ウィドウ/オーファンを避ける
- 必須: 比較のためのタブラー数字（`font-variant-numeric: tabular-nums` または Geist Mono のようなモノスペース）
- 必須: 冗長なステータスキュー（色のみではない）; アイコンにはテキストラベルを付ける
- 必須: スキーマを出荷しない—ビジュアルはラベルを省略する場合があるが、アクセシブルな名前は存在する
- 必須: 省略記号文字 `…` を使用（`` ではない）
- 必須: アンカーリンクの見出しに `scroll-margin-top` を設定; “コンテンツにスキップ”リンクを含める; 階層的な `<h1–h6>`
- 必須: ユーザー生成コンテンツに対応（短い/平均/非常に長い）
- 必須: ロケール対応の日付/時刻/数字/通貨
- 必須: 正確な名前（`aria-label`）、装飾要素は `aria-hidden`、アクセシビリティツリーで確認
- 必須: アイコンのみのボタンには説明的な `aria-label` を付ける
- 必須: ネイティブセマンティクス（`button`, `a`, `label`, `table`）を ARIA より優先
- 推奨: ナビゲーションロゴを右クリックするとブランドアセットを表示
- 必須: 用語を接着するためにノーブレークスペースを使用: `10&nbsp;MB`, `⌘&nbsp;+&nbsp;K`, `Vercel&nbsp;SDK`

## パフォーマンス

- 推奨: iOS 低電力モードと macOS Safari をテスト
- 必須: 信頼性のある測定（ランタイムを歪める拡張機能を無効化）
- 必須: 再レンダリングを追跡して最小化（React DevTools/React Scan）
- 必須: CPU/ネットワークスロットリングでプロファイル
- 必須: レイアウトの読み取り/書き込みをバッチ処理; 不要なリフロー/再描画を回避
- 必須: ミューテーション（`POST/PATCH/DELETE`）は <500 ms を目標
- 推奨: 非制御入力を優先; 制御ループを安価に（キーストロークコスト）
- 必須: 大規模なリストを仮想化（例: `virtua`）
- 必須: 折りたたみ領域上の画像のみをプリロード; 残りは遅延読み込み
- 必須: 画像による CLS を防ぐ（明示的な寸法または予約スペース）

## デザイン

- 推奨: レイヤードシャドウ（環境 + 直接）
- 推奨: 半透明の境界線 + シャドウでシャープなエッジ
- 推奨: ネストされた半径: 子 ≤ 親; 同心円
- 推奨: 色相の一貫性: 背景色に向かって境界線/シャドウ/テキストを調整
- 必須: アクセシブルなチャート（色覚異常に優しいパレット）
- 必須: コントラストを満たす—[APCA](https://apcacontrast.com/) を WCAG 2 より優先
- 必須: `:hover/:active/:focus` でコントラストを増加
- 推奨: ブラウザUIを背景に一致させる
- 推奨: グラデーションのバンディングを避ける（必要に応じてマスクを使用）